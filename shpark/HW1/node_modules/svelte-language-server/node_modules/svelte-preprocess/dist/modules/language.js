"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLanguage=exports.addLanguageAlias=exports.ALIAS_MAP=void 0;const path_1=require("path");exports.ALIAS_MAP=new Map([["pcss","css"],["postcss","css"],["sass","scss"],["styl","stylus"],["js","javascript"],["coffee","coffeescript"],["ts","typescript"]]),exports.addLanguageAlias=a=>a.forEach(a=>exports.ALIAS_MAP.set(...a)),exports.getLanguage=(a,b)=>{let c=b;if(a.lang){if("string"!=typeof a.lang)throw new Error("lang attribute must be string");c=a.lang}else if(a.type){if("string"!=typeof a.type)throw new Error("type attribute must be string");c=a.type.replace(/^(text|application)\/(.*)$/,"$2")}else if(a.src){if("string"!=typeof a.src)throw new Error("src attribute must be string");const d=path_1.basename(a.src).split(".");c=1<d.length?d.pop():b}return{lang:exports.ALIAS_MAP.get(c)||c,alias:c}};