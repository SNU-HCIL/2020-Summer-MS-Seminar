"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(a,b,c,d){d===void 0&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){d===void 0&&(d=c),a[d]=b[c]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a["default"]=b}),__importStar=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!=c&&Object.hasOwnProperty.call(a,c)&&__createBinding(b,a,c);return __setModuleDefault(b,a),b},__importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.runTransformer=void 0;const strip_indent_1=__importDefault(require("strip-indent")),errors_1=require("./errors"),TRANSFORMERS={};exports.runTransformer=async(a,b,{content:c,map:d,filename:e,attributes:f})=>{if(c=strip_indent_1.default(c),"function"==typeof b)return b({content:c,map:d,filename:e,attributes:f});try{return TRANSFORMERS[a]||(await Promise.resolve().then(()=>__importStar(require(`../transformers/${a}`))).then(b=>{TRANSFORMERS[a]=b.default})),TRANSFORMERS[a]({content:c,filename:e,map:d,attributes:f,options:"boolean"==typeof b?null:b})}catch(b){errors_1.throwError(`Error transforming '${a}'.\n\nMessage:\n${b.message}\n\nStack:\n${b.stack}`)}};